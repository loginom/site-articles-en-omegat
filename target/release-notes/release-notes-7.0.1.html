7.0.1



<p>Исправлены ошибки в Loginom Integrator, импортах из файловых источников, в узле Замена, а также в работе других обработчиков. Внесены изменения в работу утилиты BatchLauncher. Повышена производительность работы узлов JavaScript и Сортировка, информативность некоторых сообщений об ошибках.</p>

<h2 id="исправление-ошибок">Fixes</h2>

<p><a href="https://help.loginom.ru/adminguide/integrator/" target="_blank"><strong>Loginom Integrator:</strong></a>&nbsp;Если опубликовать пакет, открыть страницу Swagger UI Интегратора по протоколу http (по умолчанию&nbsp;<code>http://localhost/lgi/openapi/index.html</code>), а затем открыть страницу Swagger UI Интегратора с использованием протокола https, то в результате на странице Swagger UI и в сгенерированном OpenAPI документе был указан путь к серверу через http вместо https. В Интеграторе кэшировался OpenAPI документ с тем протоколом, который был использован при первом обращении к этому OpenAPI документу, а затем этот закэшированный документ возвращался и при обращении по http, и по https. Ошибка наблюдалась, если Loginom установлен под Linux в Docker контейнерах и при установке была включена поддержка SSL. Внесли необходимые исправления (#9616).</p>

<p><strong>Loginom Integrator:</strong>&nbsp;Если опубликовать пакет, открыть страницу Swagger UI Интегратора с использованием имени хоста или&nbsp;<code>localhost</code>, а затем открыть страницу Swagger UI Интегратора с использованием ip-адреса, то на странице Swagger UI выводилась ошибка "Fetch error Internal Server Error /lgi/openapi/PackageName.json". Ошибку исправили (#9617).</p>

<p><a href="https://help.loginom.ru/adminguide/server/" target="_blank"><strong>Loginom Server:</strong></a>&nbsp;Исправлена ошибка Access violation, которая возникала при открытии зашифрованного пакета на Linux версии Loginom, развернутой на машине с устаревшим процессором без поддержки AES-NI (#9640).</p>

<p><a href="https://help.loginom.ru/userguide/visualization/preview/quick-view.html" target="_blank"><strong>Quick view:</strong></a>&nbsp;If&nbsp;<em>Quick view</em>&nbsp;was initially opened in the floating window mode and then in was closed, whereas the node was deactivated, the column width was incorrectly calculated, and a user received data in the narrow columns when activating the node repeatedly and&nbsp;opening <em>Quick view</em>. The error was corrected (#9549).</p>

<p><a href="https://help.loginom.ru/userguide/visualization/coarse-classes/" target="_blank"><strong>Coarse сlasses visualizer:</strong></a>&nbsp;Statistics was not calculated in Coarse classes visualizer for the trained node the discrete field of which was selected as the input field. When pressing "Class indicators" button, the following warning appeared: "Failed to calculate statistics of the fine and coarse classes", whereas it was required to calculate actual indicators  The required corrections were introduced (#9628).</p>

<p><a href="https://help.loginom.ru/userguide/processors/data-trees/tree-to-table.html" target="_blank"><strong>Дерево в таблицу:</strong></a>&nbsp;Исправлена ошибка "Некорректное описание узла", которая возникала при одновременном получении данных несколькими узлами&nbsp;<em>Дерево в таблицу</em>&nbsp;из одного и того же дерева, если корневой узел дерева - массив, содержащий 0 элементов (#9609).</p>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/substitution/" target="_blank"><strong>Замена:</strong></a>&nbsp;При настройке замены для поля типа Дата/время во внутренней таблице замен переставала работать кнопка Применить, после изменения типа замены на Вещественный и значения в поле Точное совпадение. Если после этого нажать кнопку Отмена, снова изменить тип данных замены на Дата/Время и попытаться изменить данные в поле Точное совпадение, то интерфейс приложения полностью ломался. The situation was rectified (#9595).</p>

<p><strong>Замена:</strong>&nbsp;Исправлена некорректная работа обработчика&nbsp;<em>Замена</em>, если таблица замен содержала дублирующие значения. Узел не сообщал об имеющихся в таблице замен дубликатах, а результат выполнения мог быть неправильным. Сценарии, созданные в предыдущих версиях Loginom, в которых используются узлы&nbsp;<em>Замена</em>&nbsp;и таблицы замен с дубликатами, в Loginom 7.0.1 завершатся сообщением об ошибке "Значение дублируется в таблице замен". Это относится к дубликатам как во внутренней так и во внешней таблице замен (#4450, ##7434, #9624).</p>

<p><strong>Замена:</strong>&nbsp;В мастере настройки узла&nbsp;<em>Замена</em>&nbsp;для способа замены&nbsp;<em>Ввод вручную</em>&nbsp;можно выполнить действие&nbsp;<em>Получить уникальные значения</em>&nbsp;и в редакторе значения замены выбрать значение из выпадающего списка. Если среди уникальных значений поля было пропущенное значение, пустая строка или строка, состоящая только из пробельных символов, то такие значения не отображались в этом выпадающем списке. Добавлено отображение таких значений специальным (серым) цветом и в угловых кавычках:&nbsp;<code>&lt;null&gt;, &lt;Пустая строка&gt;</code>. В строках, состоящих только из пробельных символов, каждый пробел заменен на пару символов&nbsp;<code>˽</code>&nbsp;(выступ + пробел) и они также отображаются специальным стилем (#9589).</p>

<p><a href="https://help.loginom.ru/userguide/integration/import/excel.html" target="_blank"><strong>Импорт из Excel файла:</strong></a>&nbsp;Исправлена ошибка "Cannot set properties of undefined (setting 'EmptyListText')", которая возникала, если при настройке импорта после указания Имени файла параметр Выбор объекта задавался неактивной переменной (поданной на узел импорта из неактивированного порта Переменные сценария). Теперь, если не удалось определить значение в поле Выбор объекта, просмотр в мастере настройки импорта не будет показан, а выпадающий список листов будет пустым (#9533).</p>

<p><a href="https://help.loginom.ru/userguide/integration/import/ldf.html" target="_blank"><strong>Импорт из LGD-файла:</strong></a>&nbsp;Исправлена ошибка, которая появилась в Loginom 7.0.0 и приводила к росту потребления памяти при импорте данных из LGD-файла (#9568).</p>

<p><a href="https://help.loginom.ru/userguide/integration/import/txt-csv.html" target="_blank"><strong>Импорт из текстового файла:</strong></a>&nbsp;При импорте из текстового файла значение&nbsp;<code>NaN</code>&nbsp;в столбце, импортируемом как вещественный, сохранялось в наборе данных как&nbsp;<code>NaN</code>, тогда как в этом случае ожидалось пропущенное значение. Ситуацию исправили (#9603).</p>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/calc/javascript.html" target="_blank"><strong>Калькулятор JavaScript:</strong></a>&nbsp;В режиме JavaScript в&nbsp;<em>Калькуляторе</em>&nbsp;строковое выражение Null() возвращало пустую строку, а не&nbsp;<code>Null</code>. Ошибку исправили (#9504).</p>

<p><a href="https://help.loginom.ru/userguide/processors/preprocessing/binning.html" target="_blank"><strong>Binning:</strong></a>&nbsp;The error of bins generation using the Width method was corrected when one integer value was supplied to the input. Previously, in this case activation of <em>Binning</em>&nbsp;node caused Out of memory error(#9638).</p>

<p><a href="https://help.loginom.ru/userguide/processors/preprocessing/coarse-classes.html" target="_blank"><strong>Coarse сlasses:</strong></a>&nbsp;If the field with Input usage type was deleted, settings were saved and node was started in the configured&nbsp;<em>Coarse сlasses</em> node, the following error occurred: "No reference to data set. Access violation error occurred when activating such node clone. The errors were corrected (#9179).</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/schemes.html" target="_blank"><strong>Подключение набора XSD-схем:</strong></a>&nbsp;Исправлена редко возникающая ошибка Access violation. Ошибка появлялась при нажатии "Тестировать" или "Активировать подключение" в мастере настройки подключения, если элементы импортируемой схемы содержали атрибуты и она находилась во вложенной на несколько уровней папке&nbsp;<a href="https://help.loginom.ru/userguide/location_user_files.html" target="_blank">Файлового хранилища</a>&nbsp;(#9631).</p>

<p><strong>Приложение:</strong>&nbsp;Исключили сообщение об ошибке "Строка "__deleted" не может быть преобразована в значение логического типа". Оно появлялось в версии 7.0.0. при загрузке пакета, созданного до версии 6.4.0, в котором использовалось наследуемое&nbsp;<a href="https://help.loginom.ru/userguide/integration/connections/list/rest-service.html" target="_blank">подключение REST-сервис</a>&nbsp;и если в наследнике список GET параметров был очищен. Ошибка никак не влияла на работу приложения (#9579).</p>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/row-filter/" target="_blank"><strong>Фильтр строк</strong></a>&nbsp;Исправлена ошибка "Переход запрещен a.getFullYear is not a function" при повторном переходе на страницу настройки фильтрации после изменении типа данных используемого поля с Вещественного на Дата/Время (#8912).</p>

<p><a href="https://help.loginom.ru/userguide/processors/control/loop.html" target="_blank"><strong>Цикл:</strong></a>&nbsp;Исправлена ошибка "Строка не может быть преобразована в значение логического типа", которая возникала в цикле с групповой обработкой по уникальным значениям полей с включенным игнорированием ошибок. Такую ошибку можно было получить, например, если активировать, деактивировать и снова активировать Цикл с групповой обработкой по уникальным значениям полей строкового типа, настроенный на Подмодель с Нейросетью с режимом активации "всегда переобучать" (#9630).</p>

<h2 id="производительность">Производительность</h2>

<p><a href="https://help.loginom.ru/userguide/processors/programming/java-script/" target="_blank"><strong>JavaScript:</strong></a>&nbsp;За счет реализации пула интерпретаторов JavaSсript узел&nbsp;<em>JavaScript</em>&nbsp;стал активироваться быстрее (в некоторых случаях ~ в 70 раз). Следует учитывать, что один run-time, находящийся в пуле, занимает ~3 Мб памяти, максимальный размер пула определяется как количество ядер процессора умноженное на 2. В некоторых сценариях (содержащих большое количество узлов JavaSсript) может увеличиться объем памяти, занятый приложением (#9469).</p>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/sorting.html" target="_blank"><strong>Сортировка:</strong></a>&nbsp;Оптимизирована сортировка набора данных по одному столбцу. Оптимизация применяется для всех типов данных, кроме Переменного, и будет включена при любом из условий:</p>

<ul>
	<li>установлен флаг&nbsp;<em>Кэшировать все данные</em>;</li>
	<li>строк не больше 65536;</li>
	<li>любое число строк, если тип данных Логический.</li>
</ul>

<p>При оптимизированной сортировке прирост производительности для строковых данных составляет 20%, для числовых данных в 5 раз, для логических значений в 10 раз (#9518).</p>

<h2 id="повышение-информативности">UI/UX Improvements</h2>

<p><strong>Замена:</strong>&nbsp;В мастере настройки узла&nbsp;<em>Замена</em>&nbsp;в случае изменения типа данных для значения Замена тип выходных столбцов не может быть однозначно определен, если параметр Заменять остальные не задан. Поэтому поле на выходе узла становилось переменного типа, вместо указанного типа выходных значений. Предупреждение "Тип выходных значений не может быть однозначным без замены других", которое высвечивается в этом случае на поле Заменять остальные, заменили на более информативное "Выходные значения будут переменного типа, если не заменить остальные".</p>

<p><a href="https://help.loginom.ru/userguide/workflow/batchlauncher.html" target="_blank"><strong>Пакетное выполнение:</strong></a>&nbsp;Если BatchLauncher запущен с параметрами, но при этом не указан обязательный параметр&nbsp;<code>Package</code>, то пользователь получит сообщение об этом. Если BatchLauncher запущен без параметров, то, как и ранее, на экран будет выведена справка по использованию утилиты (#9626).</p>

<p><strong>Приложение:</strong>&nbsp;Сообщение об отсутствии компонента в текущей редакции Loginom сделано более информативным (например,&nbsp;<a href="https://help.loginom.ru/userguide/processors/integration/soap-request.html" target="_blank">SOAP-запрос</a>&nbsp;недоступен в редакциях Loginom CE и Loginom Team). Теперь, если открывается пакет, содержащий компонент Loginom недоступный в текущей редакции, пользователь получит сообщение в котором указано какой именно компонент недоступен (#6093).</p>

<h2 id="удобство-использования">Ease of Use</h2>

<p><strong>Визуализатор Конечные классы:</strong>&nbsp;Добавили возможность менять ширину блока со списком полей (#9646).</p>

<p><strong>Замена:</strong>&nbsp;При добавлении новой замены во внутреннюю таблицу замен для полей строкового и переменного типов в качестве значения по умолчанию используется&nbsp;<code>&lt;Пустая строка&gt;</code>&nbsp;вместо null-значения. Такой подход упрощает введение пустой строки в качестве значения замены. Ранее для этого требовалось ввести в поле пробел, а затем удалить его (#9586).</p>

<h2 id="прочие-изменения">Other Changes</h2>

<p><strong>BatchLauncher:</strong>&nbsp;Сообщение об ошибке выводится в stderr вместо stdout (#9639).</p>

<p><a href="https://help.loginom.ru/userguide/processors/integration/rest-request.html" target="_blank"><strong>REST-запрос:</strong></a>&nbsp;Если в сценарии, подготовленном до версии 7.0.0, в узле REST-запрос была настроена связь поля с параметром, в имени которого присутствовал символ $, то после открытия сценария в Loginom 7.0.0 эта связь пропадала. Внесли необходимые исправления (#9587).</p>

<p><strong>Извлечение XML:</strong>&nbsp;Компонент&nbsp;<em>Извлечение XML</em>&nbsp;переименован в&nbsp;<em>Разбор XML</em>. Страница мастера настройки узла переименована с "Параметры извлечения XML" на "Параметры разбора XML" (#8493).</p>

<div class="lg-em lg-em_gray">
<p><strong>Обращаем внимание:</strong> для версии Loginom 7.0 необходимы новые лицензионные SP-ключи или обновление прошивки USB-ключа. При обновлении с любых версий 6.хх также необходимы новые лицензии.</p>
</div>

<div class="text-align-center">
<p class="lg-text-btn lg-text-btn_border"><a href="https://loginom.ru/download">Try new version</a></p>
</div>
