Errors were corrected in several Connections to data sources, visualizers, Calculator, Coarse classes, Date and time components and also in the components included into Import, Data tree, Programming and Export groups. Loginom system requirements changed for Linux. Installer was improved.

<h2 id="исправление-ошибок">Fixes</h2>

<p><a href="https://help.loginom.ru/userguide/processors/programming/java-script/" target="_blank"><strong>JavaScript:</strong></a>&nbsp;The following error was corrected: "Runtime is in exception state". It occurred when script execution process was stopped and error occurred in script in one and the same time. Most often, the error occurred in&nbsp;<em>Preview</em>&nbsp;of&nbsp;<em>JavaScript</em> node because in this case only the first 100 rows of the data set were processed and the script stopped (#9876).</p>

<p><a href="https://help.loginom.ru/adminguide/integrator/" target="_blank"><strong>Loginom Intergator:</strong></a>Generation of&nbsp;<code>"nullable": true</code> was eliminated in OpenAPI&nbsp;for the properties that must not take null value:</p>

<ul>
	<li>for the properties that match the node ports;</li>
	<li>for the Rows properties in the data set;</li>
	<li>for the containers in the tree-like data structure.</li>
</ul>

<p>The optional elements for which no value is specified are not recorded in the response json message of Integrator. In particular,&nbsp;now <code>"Container": null</code> elements are not recorded in this message for the nonavailable containers in the tree-like data structure (#9793).</p>

<p><a href="https://help.loginom.ru/userguide/processors/programming/python/" target="_blank"><strong>Python:</strong></a>&nbsp;The following error was corrected: "Failed to start /usr/bin/python". It occurred in Loginom for Linux installed in docker container on AstraLinux SE (#9843).</p>

<p><a href="https://help.loginom.ru/userguide/processors/integration/soap-request.html" target="_blank"><strong>SOAP request:</strong></a>&nbsp;Duplication of Content-Length header in the request was corrected in SOAP request node. "Bad Request" error could occur in response to such request (#9850).</p>

<p><strong>SOAP request:</strong>&nbsp;The following error was corrected: "No WSDL operation selected". It occurred when reconfiguring the SOAP request node to another operation with the same name but inside another service or port. For example, if two packages are published with the published supernode inside them with one and the same name, and the SOAP request node initially configured to the service operation from the first package is reconfigured to the same operation from the second package. In this case, the connection that uses the SOAP request node is configured to the root WSDL document Loginom Integrator&nbsp;<code>/soap?wsdl</code>&nbsp;(#9855).</p>

<p><a href="https://help.loginom.ru/userguide/visualization/preview/quick-view.html" target="_blank"><strong>Quick view:</strong></a>&nbsp;When working in Google Chrome in&nbsp;the <em>Quick view</em>&nbsp;node with large amount of data (for example, if there are very long strings in the data set (exceeding 5 million of characters)) the following browser error occurred: "Aw, Snap! Something went wrong while displaying this webpage.". In some cases the error didn't occur after data view but significant slowdown of Loginom Studio operation was observerd, and it was required to restart the browser. The problem was solved. Now the string length for the quick view is limited by 5000 characters so that the browser could display data (#5776, #6166).</p>

<p><a href="https://help.loginom.ru/userguide/visualization/data-quality/" target="_blank"><strong>Визуализатор Качество данных:</strong></a>&nbsp;Исправлена ошибка "Cannot read properties of null (reading 'Calculated')", которая возникала, если настроить визуализатор на узле с большим набором данных, запустить расчет статистик, перейти в соседней вкладке в сценарий и удалить узел, на котором настроен визуализатор (#9810).</p>

<p><a href="https://help.loginom.ru/userguide/visualization/cube/" target="_blank"><strong>Визуализатор Куб:</strong></a>&nbsp;При выгрузке кросс-таблицы&nbsp;<em>Куба</em>&nbsp;в Exсel единицы измерения на кириллице, установленные через окно&nbsp;<em>Форматирование</em>&nbsp;в редакторе свойств&nbsp;<em>Денежный знак</em>, отображались в неверной кодировке. The regression error was corrected (#9860).</p>

<p><strong>Визуализатор Куб:</strong>&nbsp;Если в&nbsp;<em>Кубе</em>&nbsp;открыть детализацию и быстро перемещаться по ячейкам кросс-таблицы&nbsp;<em>Куба</em>, то иногда детализация не соответствовала выделенной ячейке. Such problem could occur also in other visualizers with detailing. Error of behavior was corrected (#9803).</p>

<p><strong>Визуализатор Куб:</strong>&nbsp;Исправлена ошибка "Cannot read properties of undefined (reading 'DimensionType')", которая иногда возникала в пакетах, подготовленных в 6-ой версии Loginom, при настройке измерений через окно&nbsp;<em>Настроить измерения</em>&nbsp;(#9904).</p>

<p><strong>Визуализатор Куб:</strong>&nbsp;Исправлена ошибка "Could not convert variant of type (UnicodeString) into type (Integer)", которая возникала в&nbsp;<em>Кубе</em>&nbsp;с измерением переменного типа при попытке вставить произвольное значение в строку поиска через Ctrl+V или кнопку на панели инструментов.</p>

<p><a href="https://help.loginom.ru/userguide/visualization/statistics/" target="_blank"><strong>Визуализатор Статистика:</strong></a>&nbsp;Исправлен граничный случай непопадания требуемой точки в гистограмму при расчете квантилей. Due to an error the visualizer was not displayed in some data sets (#9839).</p>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/trans-datatime/" target="_blank"><strong>Дата и время:</strong></a>&nbsp;В пакетах, подготовленных в 6-ой версии с настроенным компонентом Дата/время, который выделяет из даты месяц в строковом формате (%F), после открытия в Logimon 7 название месяца формировалось в родительном падеже. The regression error was corrected. Узел "Дата и время" формирует строку месяца в именительном падеже. Для задания полного имени месяца в родительном падеже добавили маркер формата %P (#9925).</p>

<p><a href="https://help.loginom.ru/userguide/processors/data-trees/tree-to-table.html" target="_blank"><strong>Дерево в таблицу:</strong></a>&nbsp;В портах типа&nbsp;<em>Дерево</em>&nbsp;после закрытия и повторного открытия пакета пропадали узлы-контейнеры, содержащие используемые узлы. The problem was observed when automapping was enabled. Error of behavior was corrected (#7509).</p>

<p><strong>Дерево в таблицу:</strong>&nbsp;У узла&nbsp;<em>Дерево в таблицу</em>, находящегося внутри&nbsp;<em>Подмодели</em>&nbsp;с включенной автосинхронизацией на входном порту, сбрасывались настройки после закрытия и повторного открытия пакета. The situation was rectified (#9076).</p>

<p><a href="https://help.loginom.ru/userguide/integration/import/excel/" target="_blank"><strong>Импорт Excel:</strong></a>&nbsp;При указании явно заданного диапазона для файла, содержащего одинаковые столбцы, на второй странице мастера настройки возникала ошибка "Invalid row/column index". Аналогичная ошибка возникала для любого набор данных при указании явно заданного диапазона, охватывающего все строки или все колонки (например, A:B - все строки из колонок A и B). The error was corrected (#9883, #5734).</p>

<p><a href="https://help.loginom.ru/userguide/integration/import/ldf.html" target="_blank"><strong>Импорт из LGD-файла:</strong></a>&nbsp;Исправлена ошибка Access violation at address, которая возникала при изменении типа данных используемого столбца в импортируемом файле. Такая ситуация возможна, например, если есть Файл 1 и Файл 2, отличающиеся только типом данных одного из столбцов, и импорт данных первоначально настроен на Файл 1, затем Файл 1 удален, а Файл 2 переименован в Файл 1 (#6990).</p>

<p><a href="https://help.loginom.ru/userguide/integration/import/database.html" target="_blank"><strong>Импорт из базы данных:</strong></a>&nbsp;Исправлена ошибка "Клиентский прокси-объект финализирован", которая возникала после нажатии кнопки "Сохранить" в мастере настройки импорта из базы данных, если при настройке таблица для импорта выбрана через пустую переменную (#9745).</p>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/calc/" target="_blank"><strong>Калькулятор:</strong></a>&nbsp;Если в мастере настройки узла открыть на редактирование выражение, изменить несколько его свойств, а затем, пока выражение находится в режиме редактирования, переместить его вверх или вниз, то изменения, выполненные до перемещения, не сохранялись. Error of behavior was corrected (#8306).</p>

<p><strong>Calculator:</strong>&nbsp;ArcSin and ArcCos functions returned incorrect result. ArcSin(0)=1,57 instead of 0, ArcCos(0)=0 instead of 1,57. The error appeared in version 7.0.0. Corrections were introduced (#9862).</p>

<p><strong>Calculator:</strong>&nbsp;StrToDate function description was updated in the node wizard. Changes were introduced into the following example:</p>

<ul>
	<li>format with&nbsp;<code>DD/MM/YY/HH:NN:SS</code>&nbsp;was replaced with&nbsp;<code>DD/MM/YY HH:NN:SS</code>,</li>
	<li>the date/time string was changed from&nbsp;<code>25/12/04/12:44:54</code>&nbsp;to<code>25/12/04 12:44:54</code>.</li>
</ul>

<p><a href="https://help.loginom.ru/userguide/processors/preprocessing/coarse-classes.html" target="_blank"><strong>Конечные классы:</strong></a>&nbsp;Если в качестве входного поля выбрать поле типа Дата/Время, то в мастере настройки узла&nbsp;<em>Конченые классы</em>&nbsp;отображались вещественные значения Даты/Время, хотя в порту&nbsp;<em>Параметры классов</em>, значения были правильными. The error was corrected (#7612).</p>

<p><strong>Coarse classes:</strong> Access violation at address error was corrected. Ошибка возникала при некоторых действиях пользователя по редактированию разбиения во время клика на ячейку границы (#8666).</p>

<p><strong>Coarse classes:</strong>&nbsp;The lower class cound differed from the upper bound of the previous class in the coarse classes table. If the upper bound of the first class was edited in the interactive visualizer window of the node wizard, and then the upper bound of the next class was changed, also the lower bound of the second class was changed after pressing Enter. In this situation the lower bound of the second class must not change and it must match the upper bound of the previous class. The error was corrected (#8679).</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/clickhouse.html" target="_blank"><strong>ClickHouse connection:</strong></a>&nbsp;The memory leak error was corrected. NULL values support was added for the parameters in parametrized SELECT requests.</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/postgresql.html" target="_blank"><strong>Подключение PostgreSQL:</strong></a>&nbsp;В мастере настройки&nbsp;<em>Импорта из Базы данных</em>&nbsp;не отображались материализованные представления (Materialized View), cекционированные таблицы (Table Partitioning) и внешние таблицы (Foreign Data). The situation was rectified (#9898).</p>

<p><strong>Подключение PostgreSQL:</strong>&nbsp;Для сервера PostgreSQL, у которого конфигурационный параметр lc_messages = 'Russian_Russia.1251', сообщения об ошибках на кириллице выводились в неверной кодировке. The error was corrected (#9933).</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/soap-service.html" target="_blank"><strong>Подключение SOAP-сервис:</strong></a>&nbsp;Если при настройке подключения в поле Источник WSDL указать путь к файлу, в котором namespace префикс, используемый в схеме, объявлен в элементе&nbsp;<code>wsdl:definitions</code>, то при тестировании подключения возникала ошибка загрузки WSDL "Ошибка libxml2 (код 3004): Element '{<a href="http://www.w3.org/2001/XMLSchema%7Delement" target="_blank">http://www.w3.org/2001/XMLSchema}element</a>', attribute 'type': References from this schema to components in no namespace are not allowed, since not indicated by an import statement." Ошибку исправили (#9844).</p>

<p><strong>Подключение SOAP-сервис:</strong>&nbsp;При настройке узла SOAP-запрос на странице&nbsp;<em>Выбор метода запроса</em>&nbsp;отсутствовали элементы, соответствующие опубликованному пакету, если использовалось подключение к SOAP-сервису, в котором источником WSDL являлся корневой WSDL документ Loginom Integrator&nbsp;<code>/soap?wsdl</code>. Error of behavior was corrected (#9851).</p>

<p><strong>SOAP service connection:</strong>&nbsp;Access violation at address error was corrected. It occurred when connectin to SOAP service if the schema contained ComplexType with mixed content (#9864).</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/schemes.html" target="_blank"><strong>Подключение Набор XSD-схем:</strong></a>&nbsp;Исправили ошибку в обработке конструкции simpleContent extension, из-за которой у корневого элемента отсутствовали дочерние элементы (#9868).</p>

<p><strong>Приложение:</strong>&nbsp;Исправлена ошибка "Менеджер переменных для типа IDOMNode не зарегистрирован", которая возникала при открытии некоторых пакетов, созданных в версиях младше 6.1.4 (#9837).</p>

<p><a href="https://help.loginom.ru/userguide/processors/data-trees/table-to-tree.html" target="_blank"><strong>Table to tree:</strong></a>&nbsp;There were no several nodes in the output port of&nbsp;<em>Table to tree</em>&nbsp;node in the presence of nested arrays. The error was corrected (#9887).</p>

<p><a href="https://help.loginom.ru/userguide/location_user_files.html" target="_blank"><strong>File storage:</strong></a>&nbsp;When opening the package from the read-only folder, an error occurred, and the package could not be opened. It is a regression error. Corrections were made, and now the package is opened without the right to save changes, and the user receives corresponing message (#9861).</p>

<p><a href="https://help.loginom.ru/userguide/integration/export/txt-csv.html" target="_blank"><strong>Export to text file:</strong></a>&nbsp;The multiline values (the string values that contained line breaks) were exported without framing quotation marks. In the result, the string value was broken up into different strings without any information on the fact that it was to be one string. При последующем импорте структура файла могла быть нарушена, данные считывались не как одна строка, а разбивались на несколько значений. The export error was corrected (#9683).</p>

<p><strong>Export to text file:</strong>&nbsp;When exporting the strings with non ASCII characters to the file with the fixed column width, the column width in the received file was not the same. The error was corrected (#9905).</p>

<p><strong>Export to text file:</strong>&nbsp;The characters that were not supported by encoding of the exported text file were replaced in Loginom for Windows with the character with&nbsp;<code>0x3F</code> code, and in Loginom for Linux with&nbsp;<code>0x1A</code>. Uniformity was provided. Unsupported characters will be replaced with&nbsp;<code>0x1A</code>&nbsp;(#9920) in both systems.</p>

<h2 id="улучшения">Improvements</h2>

<p><strong>Loginom Server:</strong>&nbsp;Для определения IP адреса клиента, подключившегося к Loginom Server по WebSocket через Proxy-сервер, используется заголовок X-Forwarded-For. Теперь в логах и в&nbsp;<a href="https://help.loginom.ru/userguide/admin/dispatcher.html" target="_blank">Диспетчере</a>&nbsp;раздела&nbsp;<a href="https://help.loginom.ru/userguide/admin/" target="_blank">Администрирование</a>&nbsp;можно увидеть всю цепочку IP адресов —&nbsp;<code>Исходный IP -&gt; IP proxy 1 -&gt; IP proxy 2</code>. Previously, client IP was defined as&nbsp;<code>IP proxy 2</code>&nbsp;(#9541).</p>

<p><strong>Инсталлятор:</strong>&nbsp;В интерфейсе инсталлятора под Linux появилась возможность выбрать базовый образ сервера. В параметры, принимаемые скриптом, добавлен еще один —&nbsp;<code>--from_image</code>, за которым пользователю необходимо указать желаемый базовый образ из присутствующих в&nbsp;<code>server/Dockerfile</code>. Перед построением образа сервера происходит проверка на наличие в&nbsp;<code>server/Dockerfile</code>, если образ не найден, то скрипт завершает свою работу с выводом ошибки (#9809).</p>

<p><strong>Installer:</strong>&nbsp;<code>loginomd.socket</code>&nbsp;file was transferred to <code>%ProgramData%\Loginom</code>&nbsp;folder from&nbsp;<code>%ProgramData%\Loginom\Server</code>&nbsp;subfolder (#6640).</p>

<p><strong>Инсталлятор:</strong>&nbsp;При установке Loginom Integrator редакций Standard и Enterprise создается ярлык на страницу «OpenAPI описание сервиса» (#9673).</p>

<p><strong>Logging:</strong>&nbsp;Logging of large messages from JavaScript when logging to journald became possible.</p>

<h2 id="изменения-в-системных-требованиях">Changes in the System Requirements</h2>

<ol>
	<li>
	<p>The minimum supported version of Linux 5.3 core</p>
	</li>
	<li>
	<p>The minimum supported version of docker 20.10.0.</p>
	</li>
</ol>

<h2 id="прочие-изменения">Other Changes</h2>

<p><a href="https://loginom.ru/download" target="_blank"><strong>Loginom Community Edition:</strong></a>&nbsp;Некоторые пользователи Loginom CE 7-ой версии сталкиваются с "проблемой первого запуска", когда при попытке запустить приложение открывается окно, но не отображается интерфейс. При этом повторный запуск позволяет начать работу. Чтобы обойти эту проблему добавили возможность запуска Loginom CE с аргументом командной строки&nbsp;<code>--disable-cache</code>. После обновления Loginom CE необходимо открыть свойства ярлыка и в редакторе ввода "Объект" в конце строки добавить через пробел&nbsp;<code>--disable-cache</code>.</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/sqlite.html" target="_blank"><strong>SQLite connection:</strong></a>&nbsp;Import and export for the encrypted database became 25% faster. Performance improvement will be observed for the connections created in Loginom 7.0.3 (#8213).</p>

<p class="lg-text-btn lg-text-btn_border"><a href="https://loginom.ru/download">Try version</a></p>
