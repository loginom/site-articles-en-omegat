<p>Большое количество исправлений внесено в компоненты, связанные с работой баз данных и веб-сервисов. Operation of some components was improved.</p>

<h2 id="исправление-ошибок">Fixes</h2>

<p><a href="https://help.loginom.ru/adminguide/integrator/" target="_blank"><strong>Loginom Integrator:</strong></a>&nbsp;Если в Integrator отправлялся REST-запрос методом HTTP POST и в вызываемом пакете возникала ошибка, то возвращался статус 400 (Bad Request), что не соответствовало действительности, так как в данном случае правильный статус - 500 (Internal Server Error). The situation was rectified (#4214).</p>

<p><strong>Loginom Integrator:</strong>&nbsp;На странице&nbsp;<code>/Service.svc/Rest/Help</code>&nbsp;для опубликованного пакета с именем Help вместо списка конечных точек веб-сервиса отображалось сообщение "Endpoint not found". При этом сам опубликованный пакет работал корректно. The error was corrected (#5133).</p>

<p><strong>Loginom Integrator:</strong>&nbsp;Исправлена ошибка "Object reference not set to an instance of an object", которая приходила в SOAP-ответе, если через SOAP-запрос передавался пустой массив в порт Дерево данных, корневой элемент которого является массивом (#9537).</p>

<p><a href="https://help.loginom.ru/userguide/processors/integration/rest-request.html" target="_blank"><strong>REST-запрос:</strong></a>&nbsp;Исправлена ошибка "Нераспознанная структура сообщения", которая в некоторых случаях возникала в узле&nbsp;<em>REST-запрос</em>&nbsp;при установленной опции "Имитировать запрос с ответом в файле" (#6239).</p>

<p><strong>REST-запрос:</strong>&nbsp;Если в настройках подключения к REST-сервису явно указан допустимый Content-Type ответа, а ответ получен с другим Content-Type, то все последующие ответы даже при правильном Content-Type содержали ошибку "Нераспознанная структура сообщения". The situation was rectified (#6340).</p>

<p><strong>REST-запрос:</strong>&nbsp;При включенной опции "Сохранять текст запроса на диск" в файл записывались http заголовки запроса, генерируемые по умолчанию, а также тело запроса. Заголовки, указанные на странице мастера настройки узла&nbsp;<em>REST-запрос</em>&nbsp;"Настройка пользовательских заголовков", а также переопределенные значения стандартных заголовков не попадали в файл. Т.е. заголовки, которые реально отправлялись в запросе не попадали в файл, а вместо них записывались автоматически сгенерированные. Ошибочное поведение исправили (#6805).</p>

<p><strong>REST-запрос:</strong>&nbsp;Исправили ошибку "The process cannot access the file because it is being used by another process", которая могла возникать при параллельном вызове узла&nbsp;<em>REST-запрос</em>&nbsp;с активным параметром "Сохранять текст запроса на диск" (#6938).</p>

<p><strong>REST-запрос:</strong>&nbsp;Если время ожидания сервиса превышало 30 секунд, то работа узла&nbsp;<em>REST-запрос</em>&nbsp;завершалась ошибкой "Ошибка при получении данных HTTP-клиентом:... Запрос к URL ""..."" завершился с ошибкой ... Execution of request terminated with error: 5023". При этом установка больших значений параметров "Таймаут подключения" и "Таймаут обмена данными" в настройках подключения к REST-сервису на данную ситуацию не влияли. А запрос к аналогичному сервису через&nbsp;<a href="https://www.postman.com/" target="_blank">postman</a>&nbsp;отрабатывал корректно и возвращал ответ. The error was corrected (#7275).</p>

<p><strong>REST-запрос:</strong>&nbsp;Если в настройках подключения к REST-сервису явно указан допустимый Content-Type ответа, а в ответе сервиса заголовок Content-Type отсутствует, то на выходных портах узла&nbsp;<em>REST-запрос</em>&nbsp;не было ни данных, ни сообщения об ошибке. Внесли необходимые изменения, чтобы в выходном порту "Дополнительные данные" выводилось сообщение об ошибке, связанное с некорректным Content-Type (#7552).</p>

<p><strong>REST-запрос:</strong>&nbsp;Узел&nbsp;<em>REST-запрос</em>&nbsp;с настройками по умолчанию, первично активированный без предварительного входа в мастер настройки узла, не возвращал ответ. Исправили ошибочное поведение (#7566).</p>

<p><strong>REST-запрос:</strong>&nbsp;Исправлена ошибка Access violation, которая возникала при выполнении запроса, возвращающего строку более 500 млн. characters (#7583).</p>

<p><a href="https://help.loginom.ru/userguide/visualization/preview/quick-view.html" target="_blank"><strong>Quick view:</strong></a>&nbsp;If&nbsp;<em>Quick view</em>&nbsp;was initially opened in the floating window mode and then in was closed, whereas the node was deactivated, the column width was incorrectly calculated, and a user received data in the narrow columns when activating the node repeatedly and&nbsp;opening <em>Quick view</em>. The error was corrected (#9549).</p>

<p><a href="https://help.loginom.ru/userguide/integration/import/database.html" target="_blank"><strong>Импорт из базы данных:</strong></a>&nbsp;В мастере настройки импорта из базы данных при заданном фильтре для выбранных полей на следующей странице мастера настройки поля, не соответствующие установленному фильтру, считались не выбранными. Функционал фильтрации не должен снимать отметку о выборе поля, внесены необходимые исправления (#4159).</p>

<p><strong>Импорт из базы данных:</strong>&nbsp;В мастере настройки импорта из базы данных при кликах на имена полей и при перемещении по полям вверх/вниз с помощью клавиатуры сбрасывались выставленные ранее "галочки" около полей таблиц. Ошибочное поведение исправили. Отмечать и снимать выделение можно по клику на специальный элемент слева от поля (CheckBox), перемещение по полям не изменяет состояние этого элемента (#9337).</p>

<p><strong>Импорт из базы данных:</strong>&nbsp;Если при активном подключении к базе данных открыть мастер импорта и сразу вызвать Предпросмотр, то выводилось сообщение с текстом: "Сначала выберите поля для предпросмотра". Но в данной ситуации текст сообщения должен быть: "Не указана таблица базы данных". The situation was rectified (#8775).</p>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/calc/" target="_blank"><strong>Калькулятор:</strong></a>&nbsp;Исправлены ошибки в логике активации/деактивации пунктов "Переместить вверх", "Переместить вниз", "Удалить" контекстного меню списка выражений (#4498).</p>

<p><a href="https://help.loginom.ru/userguide/processors/datamining/linear-regression/index.html" target="_blank"><strong>Линейная регрессия:</strong></a>&nbsp;После открытия ранее настроенного пакета и запуска узла&nbsp;<em>Линейная регрессия</em>&nbsp;без переобучения, значения доверительных интервалов не рассчитывались и были равны 0. Корректные значения доверительных интервалов появлялись в порту "Коэффициенты регрессионной модели" после повторного запуска узла. The error was corrected (#9553).</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/wh-mssql.html" target="_blank"><strong>Подключение Deductor Warehouse MS SQL:</strong></a>&nbsp;Исправлена ошибка "Cannot execute command in current transaction context until previous opened DataSet ...". Ошибка могла возникнуть при активации подключения к Хранилищу данных, у которого длинный (более 25) список объектов (#9154).</p>

<blockquote>
<p>Please note. В пакетах, созданных до версии 6.5, имеющих подключение к Хранилищу данных на MS SQL через встроенный клиент, при активации подключения будет выдана ошибка "Required provider is not installed". It is required to install SQL Server Native Client (#9154).</p>
</blockquote>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/mysql.html" target="_blank"><strong>Подключение MySQL:</strong></a>&nbsp;Исправлена ошибка "Data type is not supported", которая возникала:</p>

<ul>
	<li>в мастере настройки&nbsp;<em>Импорта из базы данных</em>&nbsp;при выборе таблицы, в которой есть поля типа JSON;</li>
	<li>на странице настройки соответствия между столбцами в мастере&nbsp;<em>Импорта из базы данных</em>&nbsp;или на этапе активации узла&nbsp;<em>Импорт из базы данных</em>, в котором задан SELECT-запрос, возвращающий поля с типом JSON (#9248).</li>
</ul>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/oracle.html" target="_blank"><strong>Подключение Oracle:</strong></a>&nbsp;Для баз данных в кодировках UTF -8, -16, -32 появилась возможность использовать в запросах Unicode'ые строковые литералы. Для баз данных в других кодировках в запросах со строками, содержащими не поддерживаемые кодировкой БД символы, нужно добавлять префикс N перед строковым литералом (N'строка'). Ранее запросы, в тексте которых содержались символы Unicode не работали (#9067).</p>

<p><strong>Подключение Oracle:</strong>&nbsp;Исправлена ошибка "Can bind a LONG value only for insert a LONG column", которая возникала при экспорте в базу данных Oracle в Direct mode для длинных строк при включенном расширении типов (#9147).</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/sqlite.html" target="_blank"><strong>Подключение SQLite:</strong></a>&nbsp;Исправлена некорректная работа опции "Трактовать NOCASE как UNICODE". После исправления алгоритма, как и заявлено, выполняется сравнение без учёта регистра символов. Кроме того, название опции изменилось на "NOCASE в режиме UNICODE" (#9340).</p>

<p><strong>Приложение:</strong>&nbsp;В сценариях Loginom подготовленных на Windows 7 и Windows Server 2008 R2, при переносе на более новые версии операционной системы, могли возникать ошибки из-за различий в сортировке строк, содержащих буквы&nbsp;<code>Й</code>,&nbsp;<code>И</code>. Добавили поддержку корректного выполнения узлов с сохраняемыми уникальными значениями, обученных в более ранних версиях (#8206).</p>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/row-filter/" target="_blank"><strong>Фильтр строк:</strong></a>&nbsp;При использовании двух последовательных узлов&nbsp;<em>Фильтр строк</em>&nbsp;во втором узле не обновлялся список уникальных значений, если в предыдущем фильтре были внесены изменения. Внесли исправления в алгоритм активации входного порта узла&nbsp;<em>Фильтр строк</em>&nbsp;(#9508).</p>

<p><a href="https://help.loginom.ru/userguide/integration/export/database.html" target="_blank"><strong>Экспорт в базу данных</strong></a>,&nbsp;<a href="https://help.loginom.ru/userguide/integration/export/tableau.html" target="_blank"><strong>Экспорт в Tableau:</strong></a>&nbsp;В этих мастерах настройки переместить поле таблицы с помощью клавиатуры получалось только 1 раз, а последующие нажатия клавиш Ctrl+Up или Ctrl+Down не приводили к перемещению поля. Проблему решили (#7868).</p>

<p><strong>Экспорт в базу данных:</strong>&nbsp;Исправлена ошибка "Invalid precision value", которая возникала при экспорте в MS Access текстовых столбцов полностью состоящих из пустых или null значений (#9501).</p>

<h2 id="улучшения">Improvements</h2>

<p><a href="https://help.loginom.ru/userguide/processors/transformation/substitution/" target="_blank"><strong>Замена:</strong></a>&nbsp;В обработчик добавлена возможность установки пропущенного (null) значения в поле редакторов заменяемого значения и значения замены. Ранее для строковых полей нельзя было в качестве значения замены указать null-значение (#3206).</p>

<p><a href="https://help.loginom.ru/userguide/integration/connections/list/rest-service.html" target="_blank"><strong>Подключение REST-сервис:</strong></a>&nbsp;Дополнили алгоритм тестирования подключения проверкой на фактическое наличие сервиса. Ранее при нажатии на кнопку "Тестировать" или "Подключить" проверяли только правильность установленных параметров (#6194).</p>

<p><a href="https://help.loginom.ru/userguide/processors/control/condition.html" target="_blank"><strong>Условие:</strong></a>&nbsp;На страницах мастера "Настройка списка условий" и "Настройка портов узла" изменены заголовки. Скорректирован размер выпадающего списка у кнопки "Добавить", чтобы название порта "Дерево данных" полностью отображалось на экране (#8084, #8085).</p>

<p><a href="https://help.loginom.ru/userguide/location_user_files.html" target="_blank"><strong>Файловое хранилище:</strong></a>&nbsp;При огромном количестве файлов (~ 1000000) в одной из вложенных папок пользователей наблюдалась очень долгая загрузка страницы "Начало". Выполнена оптимизация запроса списка папок файлового хранилища (#8551).</p>

<div class="lg-em lg-em_gray">
<p><strong>Обращаем внимание:</strong> для версии Loginom 7.0 необходимы новые лицензионные SP-ключи или обновление прошивки USB-ключа. При обновлении с любых версий 6.хх также необходимы новые лицензии.</p>
</div>

<div class="text-align-center">
<p class="lg-text-btn lg-text-btn_border"><a href="https://loginom.ru/download">Try new version</a></p>
</div>
